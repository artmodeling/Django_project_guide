# Обработка ошибок  в форме создания товара

1. Внести изменения в файл «store/templates/store/product_add.html»:  
	1) Удалить строку –  
    `<input id="titleInput" name="title" type="text" placeholder="заголовок (максимальная длина 200 символов)" required>`.  

	2) Вместо строки, которую удалили, записать код:  
	``` 
            <input 
                id="titleInput"
                name="title"
                type="text"
                value="{{ title|default:'' }}"
                placeholder="заголовок (максимальная длина 200 символов)"
            >
            {% if errors.title %}
                <div style="color: red;">{{ errors.title }}</div>
            {% endif %}

    ``` 
    
    3) Удалить строку –  
    `<textarea id="textInput" name="text" rows="3"></textarea>`.
    
    4) Вместо строки, которую удалили, записать код:  
    ``` 
            <textarea id="textInput" name="text" rows="3">{{ text|default:'' }}</textarea>
            {% if errors.text %}
                <div style="color: red;">{{ errors.text }}</div>
            {% endif %}
    ``` 

    
    2. Внести изменения в файл «store/views.py»:  
        1) Удалить строку –  
        `product = Products.objects.create(product_name=request.POST.get('title'), about_item=request.POST.get('text'))`.
        2) Вместо строки, которую удалили, записать код:
        ``` 
        title = request.POST.get('title').strip()
        text = request.POST.get('text').strip()
        ``` 
    
    3) Удалить строку:  
    `return redirect('product_detail', product_id=product.id)`.  
    
    4) Вместо строки, которую удалили, записать код:  
    ```python 
    errors = {}

    if not title:
      errors['title'] = 'Наименование товара необходимо заполнить.'
    if not text:
      errors['text'] = 'Описание товара обязателено нужно указать.'

    if not errors:
      product = Products.objects.create(product_name=title, about_item=text)

      return redirect('product_detail', product_id=product.id)
    else:
      context = {
        'errors': errors,
        'title': title,
        'text': text
      }

      return render(request, 'store/product_add.html', context)
    ``` 

3. (Опционально.) Создать коммит:  
«feat(products): Добавил обработку ошибок в форму создания товара:  
\- Отображение ошибок в шаблоне  
\- Сделал так чтобы значения полей не сбрасывались при повторном рендере.»
