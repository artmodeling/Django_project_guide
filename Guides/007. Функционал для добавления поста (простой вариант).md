# Функционал для добавления поста (простой вариант)

1. Создать файл «store/templates/store/product_add.html» и записать в него код:  
```html 
{% extends "base.html" %}

{% block page_title %}Добавить товар{% endblock page_title %}

{% block page_content %}
    <h1>Добавить новый товар</h1>

    <form method="POST">
        {% csrf_token %}

        <div>
            <label for="titleInput">Наименование товара:</label>
            <input id="titleInput" name="title" type="text" placeholder="заголовок (максимальная длина 200 символов)" required>
        </div>

        <div>
            <label for="textInput">Подробнее о товаре:</label>
            <textarea id="textInput" name="text" rows="3"></textarea>
        </div>

        <button type="submit">Создать</button>
    </form>
{% endblock page_content %}

``` 


2. Внести изменения в файл «store/views.py»:  
	\- В конец строки «`from django.shortcuts import render, get_object_or_404`» поставить запятую с пробелом и добавить «`redirect`»  
	3) После функции –  
```python
def get_product_detail(request, product_id):
  # return render(request, 'store/product_detail.html', {"product": Products.objects.get(id=product_id)})
  return render(request, 'store/product_detail.html', {"product": get_object_or_404(Products, id=product_id)})
``` 
	добавить две пустые строки, чтобы визуально отделить следующую функцию от этой и записать код –  
```python 
def create_product(request):
  if request.method == "GET":
    return render(request, 'store/product_add.html')
  
  if request.method == "POST":
    product = Products.objects.create(product_name=request.POST.get('title'), about_item=request.POST.get('text'))

    return redirect('product_detail', product_id=product.id)

``` 


3. Внести изменения в файл «store/urls.py»:  
	\- после строки «`path("products/<int:product_id>/", views.get_product_detail, name='product_detail'),`» добавить строку:  
```python 
path('products/add/', views.create_product),
``` 

4. На сайте в созданной форме для добавления товара, проверить, что эта форма работает. То есть, добавить через нее один или несколько новых товаров:
    1) К URL адресу (http://127.0.0.1:8000) добавить «`/products/add/`», должна открыться страница с формой для добавления товара.    
    2) Заполнить форму, добавить товар.  
    3) То, что новые товары создались, можно посмотреть либо в админке сайта в разделе «Товары», либо в БД «db.sqlite3» в таблице «products».

5. Проверить на сайте, что страница html, для которой вносили изменения, работает.

6. (Опционально.) Создать коммит: «feat(products): Добавил функционал для добавления поста (самый простой вариант)».
