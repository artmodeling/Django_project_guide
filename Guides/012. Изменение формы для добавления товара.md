# Изменение формы для добавления товара

1. Создание файла для формы добавления товара:  
	1) Создать файл «store/forms.py».  
	2) В созданный файл «store/forms.py» записать код:  
	```python 
    from django import forms


    class ProductForm(forms.Form):
        title = forms.CharField(
            max_length=200,
            label="Наименование товара:",
            required=False,
            widget=forms.TextInput(attrs={
            'placeholder': "Наименование товара (максимальная длина 200 символов)"
            }) # Можно передавать другие атрибуты, например, "class": 'title-input'
        )

        text = forms.CharField(
            label="Описание товара:",
            widget=forms.Textarea(attrs={
            'row': 3
            })
        )

    def clean_title(self):
        title = self.cleaned_data['title'].strip()

        if not title:
            raise forms.ValidationError("Наименование товара обязательно.")
        
        if len(title) < 5:
            raise forms.ValidationError("Наименование товара не должно быть короче 5 символов.")
        
        return title

    ``` 


2. Внести изменения в файл «store/templates/store/product_add.html»:  
	1) Удалить строки:  
	```html 
        <div>
            <label for="titleInput">Наименование товара:</label>
            <input 
                id="titleInput"
                name="title"
                type="text"
                value="{{ title|default:'' }}"
                placeholder="заголовок (максимальная длина 200 символов)"
            >
            {% if errors.title %}
                <div style="color: red;">{{ errors.title }}</div>
            {% endif %}
        </div>

        <div>
            <label for="textInput">Подробнее о товаре:</label>
            <textarea id="textInput" name="text" rows="3">{{ text|default:'' }}</textarea>
            {% if errors.text %}
                <div style="color: red;">{{ errors.text }}</div>
            {% endif %}
        </div>

    ``` 


	2) Вместо строк, которые были удалены, записать код, эта строка должна быть на одном уровне со строкой `{% csrf_token %}`:  
	```html 
    {{ form.as_div }}
	``` 


3. Внести изменения в файл «store/views.py»:  
	1) Сразу после строки `from store.models import Products` добавить строку:   

	```python 
    from store.forms import ProductForm
	``` 


    2) После строки `if request.method == "POST":` удалить две строки:  
    
	```python 
    title = request.POST.get('title').strip()
    text = request.POST.get('text').strip()

	``` 


	3) Вместо строк, которые были удалены, записать строку, у этой строки должен быть один отступ по отношению к «if», который стоит над этой строкой:  
	```python 
    form = ProductForm(request.POST)
	``` 


	4) Удалить строки:  
	```python 
    errors = {}

    if not title:
      errors['title'] = 'Наименование товара необходимо заполнить.'
    if not text:
      errors['text'] = 'Описание товара обязателено нужно указать.'

    if not errors:
      product = Products.objects.create(product_name=title, about_item=text)
    ``` 


    5) Вместо строк, которые были удалены, записать строки, у первой строки здесь должен быть один отступ по отношению к «if», который стоит над этой строкой:  
    ```python 
    if form.is_valid():
      product = Products.objects.create(
      product_name=form.cleaned_data['title'],
      about_item=form.cleaned_data['text']
      )
	``` 


	6) Удалить строки:  
	```python 
      context = {
        'errors': errors,
        'title': title,
        'text': text
      }

      return render(request, 'store/product_add.html', context)
	``` 


	7) Вместо строк, которые были удалены, записать строку на том же уровне, на каком была самая первая строка из удаленных строк:  
	```python 
    return render(request, 'store/product_add.html', {"form": form})
	``` 


	8) Удалить строку –  
    `return render(request, 'store/product_add.html')`.

	9) Вместо этой строки записать строки, все эти строки должны быть на уровне самого первого «if» этой функции:  
	```python 
    # GET
    form = ProductForm()
    
    return render(request, 'store/product_add.html', {"form": form})
	``` 

4. Проверить на сайте, что страница html, в которую вносили изменения, работает.

5. (Опционально.) Создать коммит: «feat(products): Изменил форму для добавления поста (forms.Form) и функционал связанный с ним.»
